name: Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Install IO::Pty
      run: sudo apt-get update -y && sudo apt-get install -y libio-pty-perl
    - name: Run Tests
      run: make -j1 test
    - name: Syntax checks
      run: make lint
  test-windows:
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v4
    - name: Run Tests
      env:
        MSYS: winsymlinks:nativestrict
      run: make -j1 test
  test-macos:
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v4
    - name: Run Tests
      run: make -j1 test
